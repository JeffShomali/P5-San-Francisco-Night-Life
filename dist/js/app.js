"use strict";var locations=[{id:"45ac12d6f964a5205d411fe3",name:"Saga Night Club",formattedPhone:"(415) 882-4435",address:"750 Harrison St, San Francisco, CA, 94107",lat:37.7817,lng:-122.399002,url:"www.example.com",filter:["Night Club","Night Life","Dance"]},{id:"45ac12d6f964a5205d411fe3",name:"El Toro Night Club",formattedPhone:"(415) 468-0670",address:"2470 San Bruno Ave, San Francisco, CA, 94134",lat:37.73076295852661,lng:-122.404949,url:"www.example.com",filter:["Night Club","Night Life","Dance"]},{id:"45ac12d6f964a5205d411fe3",name:"Temple Night Club",formattedPhone:"(415) 882-4435",address:"540 Howard St, San Francisco, CA, 94105",lat:37.81815270099963,lng:-122.34477495801933,url:"www.example.com",filter:["Night Club","Night Life","Dance"]},{id:"45ac12d6f964a5205d411fe3",name:"Study all night Club",formattedPhone:"(415) 882-4435",address:"San Francisco, CA,94105",lat:37.721531,lng:-122.459652,url:"www.example.com",filter:["Night Club","Night Life","Dance"]},{id:"45ac12d6f964a5205d411fe3",name:"Wayo Sushi",formattedPhone:"(415) 474-8369",address:"1407 Van Ness Ave, San Francisco, CA, 94109",lat:37.7886,lng:-122.421868,url:"http://sushiboat-hub.com",filter:["sushi","food","bar"]},{id:"45ac12d6f964a5205d411fe3",name:"Nara Sushi",formattedPhone:"(415) 567-1515",address:"1515 Polk St, San Francisco, CA, 94109",lat:37.790912,lng:-122.42078,url:"http://sushiboat-hub.com",filter:["sushi","food","bar"]},{id:"45ac12d6f964a5205d411fe3",name:"Sushi Boat",formattedPhone:"(415) 781-5111",address:"389 Geary St, San Francisco, CA, 94102",lat:37.78716444969067,lng:-122.409693,url:"http://sushiboat-hub.com",filter:["sushi","food","bar"]},{id:"45ac12d6f964a5205d411fe3",name:"Sakana Sushi & Grill",formattedPhone:"(415) 775-7644",address:"605 Post St, San Francisco, CA, 94109",lat:37.787843977022874,lng:-122.41172790527344,url:"http://sfsakana.com",filter:["sushi","food","bar"]},{id:"45ac12d6f964a5205d411fe3",name:"Maru Sushi",formattedPhone:"(415) 393-9911",address:"529 Powell St, San Francisco, CA, 94108",lat:37.78960361061905,lng:-122.40871786760785,url:"http://sushiboat-hub.com",filter:["sushi","food","bar"]},{id:"45ac12d6f964a5205d411fe3",name:"Akikoâ€™s Restaurant & Sushi Bar",formattedPhone:"(415) 397-3218",address:"431 Bush St, San Francisco, CA, 94108",lat:37.7905592751754,lng:-122.4046978354454,url:"http://akikosrestaurant.com",filter:["sushi","food","bar"]},{id:"45ac12d6f964a5205d411fe3",name:"Okoze Sushi",formattedPhone:"(415) 567-3397",address:"1207 Union St, San Francisco, CA, 94109",lat:37.79913516819813,lng:-122.41938691474148,url:"http://sushiboat-hub.com",filter:["sushi","food","bar"]},{id:"45ac12d6f964a5205d411fe3",name:"Sudachi Sushi & Korean BBQ",formattedPhone:"(415) 931-6951",address:"1217 Sutter St, San Francisco, CA, 94109",lat:37.7875653,lng:-122.420459,url:"http://sudachisf.net",filter:["sushi","food","bar"]},{id:"45ac12d6f964a5205d411fe3",name:"Live Sushi Bar",formattedPhone:"(415) 861-8610",address:"2001 17th St, San Francisco, CA, 94103",lat:37.76467,lng:-122.40351304,url:"http://www.livesushibar.com/",filter:["sushi","food","bar"]},{id:"45ac12d6f964a5205d411fe3",name:"Elephant Sushi",formattedPhone:"(415) 359-9001",address:"380 Golden Gate Ave, San Francisco, CA, 94102",lat:37.78153661500664,lng:-122.4169313047121,url:"http://elephantsushi.com",filter:["sushi","food","bar"]},{id:"45ac12d6f964a5205d411fe3",name:"Oaktown 8s Square Dance club",formattedPhone:"(415) 633-3900",address:"747 Market St, Oakland, CA, 94109",postalCode:"",lat:37.81148696748271,lng:-122.26081093886104,url:"http://www.SmallFryDanceClub.com",filter:["Dance"]},{id:"45ac12d6f964a5205d411fe3",name:"Equinox Sports Club San Francisco",formattedPhone:"(415) 633-3900",address:"747 Market St, San Francisco, CA, 94103",lat:37.786451314671154,lng:-122.40423113107681,url:"http://www.facebook.com/equinox",filter:["Dance"]},{id:"45ac12d6f964a5205d411fe3",name:"Liholiho Yacht Club",formattedPhone:"(415) 440-5446",address:"871 Sutter St, San Francisco, CA, 94109",lat:37.78836869881094,lng:-122.4145862541547,url:"http://liholihoyachtclub.com",filter:["Dance"]},{id:"45ac12d6f964a5205d411fe3",name:"Napa Dance Club",formattedPhone:"(415) 633-3900",address:"747 Market St, Redwood City, CA, 94062",lat:37.489222,lng:-122.239173,url:"http://www.SmallFryDanceClub.com",filter:["Dance"]},{id:"45ac12d6f964a5205d411fe3",name:"Small Fry Dance Club",formattedPhone:"(650) 393-5593",address:"1528 S El Camino Real Ste 208, San Mateo, CA, 94402 ",postalCode:"",lat:37.55348327633724,lng:-122.3159408569336,url:"http://www.SmallFryDanceClub.com",filter:["Dance"]}],styleArray=[{featureType:"all",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{color:"#ed5929"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#c4c4c4"}]},{featureType:"administrative.neighborhood",elementType:"labels.text.fill",stylers:[{color:"#ed5929"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21},{visibility:"on"}]},{featureType:"poi.business",elementType:"geometry",stylers:[{visibility:"on"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ed5929"},{lightness:"0"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{color:"#ed5929"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#575757"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.stroke",stylers:[{color:"#2c2c2c"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#999999"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]}],fourSquareAPI={client_id:"ITE0R1YK5FQLKGDOZSBEPT1NK1WOJNMXI2MF23UZK4CFJV1Q",client_secret:"TETG0XTAT4LTIYCXOFUGXYCCOU4ZMOMI4X4BGEJGZMLNJPCQ"},googleMapObject={map:{},options:{center:{lat:37.7886,lng:-122.4218},zoom:13,mapTypeControl:!1,styles:styleArray},largeInfoWindow:new google.maps.InfoWindow,infoWindowContent:'<div class="info-window"><div class="window-title"> <h4> %name% </h4> </div><div class="window-address"> %address% </div> <p>%phone%</p> </div><br> <p><a href="%weburl%">Website</a></p></div>',initMap:function(a){googleMapObject.map=new google.maps.Map(document.getElementById("map"),googleMapObject.options),a.initialized&&!a.hasMarkers&&a.showMarkers()}},Location=function(a,b){this.name=ko.observable(a.name),this.address=ko.observable(a.address),this.lat=ko.observable(a.lat),this.lng=ko.observable(a.lng),this.filter=ko.observableArray(a.filter),this.initialized=ko.observable(!1),this.photo=ko.observable();var c=new google.maps.Marker({position:new google.maps.LatLng(a.lat,a.lng),icon:"images/marker.png"});google.maps.event.addListener(c,"click",function(a,b){return function(){b.displayGeoandMarker(a)}}(this,b)),this.marker=c},Filter=function(a){this.name=ko.observable(a.name),this.on=ko.observable(!0)},ViewModel=function(){var a=this;a.filter=ko.observable(""),a.place=ko.observable(),a.initialized=!1,a.hasMarkers=!1,a.connectionError=ko.observable(!1),a.init=function(){var b=[],c=[];a.placeList=ko.observableArray([]),locations.forEach(function(c){a.placeList.push(new Location(c,a)),c.filter.forEach(function(a){b.indexOf(a)<0&&b.push(a)})}),b.forEach(function(a){c.push(new Filter({name:a}))}),a.filters=ko.observableArray(c),a.currentFilters=ko.computed(function(){var b=[];return ko.utils.arrayForEach(a.filters(),function(a){a.on()&&b.push(a.name())}),b}),a.filteredPlaces=ko.computed(function(){var b=ko.observableArray([]),c=ko.observableArray([]);ko.utils.arrayForEach(a.placeList(),function(c){var d=c.filter(),e=d.filter(function(b){return a.currentFilters().indexOf(b)!=-1});e.length>0&&b.push(c)});var d=a.filter().toLowerCase();return c=d?ko.utils.arrayFilter(b(),function(a){return a.name().toLowerCase().indexOf(d)!==-1}):b(),a.filterMarkers(c),c}),a.hasMarkers||a.showMarkers(),a.initialized=!0},a.filterMarkers=function(b){ko.utils.arrayForEach(a.placeList(),function(a){b.indexOf(a)===-1?a.marker.setVisible(!1):a.marker.setVisible(!0)})},a.toggleFilter=function(a){a.on(!a.on())},a.displayGeoandMarker=function(b){a.place()&&a.place().marker.setIcon("images/marker.png"),b.marker.setIcon("images/selected.png"),a.connectionError(!1),b.initialized()||$.ajax({url:"https://api.foursquare.com/v2/venues/search?ll="+b.lat()+","+b.lng()+"&intent=match&name="+b.name()+"&client_id="+fourSquareAPI.client_id+"&client_secret="+fourSquareAPI.client_secret+"&v=20150326"}).done(function(a){var c=a.response.venues[0];b.id=ko.observable(c.id),c.hasOwnProperty("url")&&(b.url=ko.observable(c.url)),c.hasOwnProperty("contact")&&c.contact.hasOwnProperty("formattedPhone")&&(b.phone=ko.observable(c.contact.formattedPhone)),googleMapObject.largeInfoWindow.setContent(googleMapObject.infoWindowContent.replace("%name%",b.name()).replace("%address%",b.address()).replace("%phone%",b.phone()).replace("%weburl%",b.url())),googleMapObject.largeInfoWindow.open(googleMapObject.map,b.marker)}).fail(function(b){a.connectionError(!0),a.scrollTo("#location-call-back-wrapper")})},a.scrollTo=function(a){$("html, body").animate({scrollTop:$(a).offset().top},"slow")},a.showMarkers=function(){ko.utils.arrayForEach(a.placeList(),function(a){a.marker.setMap(googleMapObject.map)}),a.hasMarkers=!0}},view=new ViewModel;$(document).ready(function(){view.init(),ko.applyBindings(view),$(window).on("resize",function(){google.maps.event.trigger(googleMapObject.map,"resize"),googleMapObject.map.setCenter(googleMapObject.options.center)})}),google.maps.event.addDomListener(window,"load",googleMapObject.initMap(view));